<div class="submissions-table row">
	<div class="row text-center analytics" ng-if="analyticsData">
		<div class="col-xs-12 header-title">
			<div class="col-xs-3">
				{{ 'TOTAL_VIEWS' | translate }}
			</div>

			<div class="col-xs-3">
				{{ 'RESPONSES' | translate }}
			</div>

			<div class="col-xs-3">
				{{ 'COMPLETION_RATE' | translate }}
			</div>

			<div class="col-xs-3">
				{{ 'AVERAGE_TIME_TO_COMPLETE' | translate }}
			</div>
		</div>
		<div class="col-xs-12 header-numbers">
			<div class="col-xs-3">
				{{analyticsData.globalStatistics.visits | number:0}} 
			</div>

			<div class="col-xs-3">
				{{analyticsData.globalStatistics.responses | number:0}} 
			</div>

			<div class="col-xs-3">
				{{analyticsData.globalStatistics.conversion_rate | number:2}}% 
			</div>

			<div class="col-xs-3">
				{{analyticsData.globalStatistics.average_time | secondsToDateTime | date:'mm:ss'}}
			</div>
		</div>
		<div class="col-xs-12 detailed-title">
			<div class="col-xs-3">
				{{ 'DESKTOP_AND_LAPTOP' | translate }}
			</div>

			<div class="col-xs-3">
				{{ 'TABLETS' | translate }}
			</div>

			<div class="col-xs-3">
				{{ 'PHONES' | translate }}
			</div>

			<div class="col-xs-3">
				{{ 'OTHER' | translate }}
			</div>
		</div>

		<div class="col-xs-12 detailed-row">
			<div class="col-xs-3">
				<div class="row header">
					{{ 'UNIQUE_VISITS' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.desktop.visits | number:0}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'UNIQUE_VISITS' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.tablet.visits | number:0}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'UNIQUE_VISITS' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.tablet.visits | number:0}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'UNIQUE_VISITS' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.other.visits | number:0}}
				</div>
			</div>
		</div>

		<div class="col-xs-12 detailed-row">
			<div class="col-xs-3">
				<div class="row header">
					{{ 'RESPONSES' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.desktop.responses | number:0}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'RESPONSES' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.tablet.responses | number:0}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'RESPONSES' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.phone.responses | number:0}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'RESPONSES' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.other.responses | number:0}}
				</div>
			</div>
		</div>

		<div class="col-xs-12 detailed-row">
			<div class="col-xs-3">
				<div class="row header">
					{{ 'COMPLETION_RATE' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.desktop.conversion_rate | number:2}}%
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'COMPLETION_RATE' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.tablet.conversion_rate | number:2}}%
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'COMPLETION_RATE' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.phone.conversion_rate | number:2}}%
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'COMPLETION_RATE' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.other.conversion_rate | number:2}}%
				</div>
			</div>
		</div>

		<div class="col-xs-12 detailed-row">
			<div class="col-xs-3">
				<div class="row header">
					{{ 'AVERAGE_TIME_TO_COMPLETE' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.desktop.average_time | secondsToDateTime | date:'mm:ss'}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'AVERAGE_TIME_TO_COMPLETE' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.tablet.average_time | secondsToDateTime | date:'mm:ss'}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'AVERAGE_TIME_TO_COMPLETE' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.phone.average_time | secondsToDateTime | date:'mm:ss'}}
				</div>
			</div>

			<div class="col-xs-3">
				<div class="row header">
					{{ 'AVERAGE_TIME_TO_COMPLETE' | translate }}
				</div>
				<div class="row">
					{{analyticsData.deviceStatistics.other.average_time | secondsToDateTime | date:'mm:ss'}}
				</div>
			</div>
		</div>

	</div>


	<br>
	<div class="row table-tools">
		<div class="col-xs-2">	
			<button class="btn btn-danger" ng-click="deleteSelectedSubmissions()" ng-disabled="!isAtLeastOneChecked();">
				<i class="fa fa-trash-o"></i> {{ 'DELETE_SELECTED' | translate }}
			</button>
		</div>
		<div class="col-xs-2 col-xs-offset-4 text-right">	
			<button class="btn btn-gray" ng-click="exportSubmissions('xml')">
				<small>{{ 'EXPORT_TO_EXCEL' | translate }}</small>
			</button>
		</div>
		<div class="col-md-2 text-right">	
			<button class="btn btn-gray" ng-click="exportSubmissions('csv')">
				<small>{{ 'EXPORT_TO_CSV' | translate }}</small>
			</button>
		</div>
		<div class="col-md-2 text-right">	
			<button class="btn btn-gray" ng-click="exportSubmissions('json')">
				<small>{{ 'EXPORT_TO_JSON' | translate }}</small>
			</button>
		</div>
	</div>
	<div class="row table-outer">
		<div class="col-xs-12">
			<table id="table-submission-data" class="table table-striped table-hover table-condensed">
			<thead>
				<tr>
					<th>
						<input ng-model="table.masterChecker" ng-change="toggleAllCheckers()" type="checkbox"/>
					</th>
					<th>#</th>
					<th data-ng-repeat="(key, value) in myform.form_fields track by $index">
						{{value.title}}
					</th>
					<th>
						{{ 'PERCENTAGE_COMPLETE' | translate }}
					</th>
					<th>
						{{ 'TIME_ELAPSED' | translate }}
					</th>
					<th>
						{{ 'DEVICE' | translate }}
					</th>
					<th>
						{{ 'LOCATION' | translate }}
					</th>
					<th>
						{{ 'IP_ADDRESS' | translate }}
					</th>
					<th>
						{{ 'DATE_SUBMITTED' | translate }} (UTC)
					</th>
				</tr>
			</thead>

			<tbody>
				<tr data-ng-repeat="row in table.rows" ng-click="rowClicked($index)" ng-class="{selected: row.selected === true}">
					<td>
						<input ng-model="row.selected" type="checkbox"/>
					</td>
					<th class="scope">
						{{$index+1}}
					</th>

					<td data-ng-repeat="field in row.form_fields">
						{{field.fieldValue}}
					</td>
					<td>
						{{row.percentageComplete}}%
					</td>
					<td>
						{{row.timeElapsed | secondsToDateTime | date:'mm:ss'}}
					</td>
					<td>
						{{row.device.name}}, {{row.device.type}}
					</td>
					<td>
						{{row.geoLocation.City}}, {{row.geoLocation.Country}}
					</td>
					<td>
						{{row.ipAddr}}
					</td>
					<td>
						{{row.created | date:'yyyy-MM-dd HH:mm:ss'}}
					</td>
				</tr>
			</tbody>
			</table>
		</div>
	</div>
</div>
